<!doctype html>
<html>
<head>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
<script>
var data = {
  "er": [
    {"name":"Paul Ryan", "courses":[
        ["Infection Control", 87, 100, "March 1st, 2015"],
        ["CPR", 30, 80, "March 2st, 2015"]
      ]
    },
    {"name":"Gary Peters", "courses":[
        ["Infection Control", 100, 100, "January 1st, 2015"],
        ["CPR", 100, 100, "January 2st, 2015"]
      ]
    },
    {"name":"Lindsey Paul", "courses":[
        ["Infection Control", 43, 91, "July 10th, 2015"],
        ["CPR", 23, 85, "August 2st, 2015"]
      ]
    },
    {"name":"Harry Reid", "courses":[
        ["Infection Control", null, null, null],
        ["CPR", 53, null, null]
      ]
    }
    ],
  "nursing": [
    {"name":"John Boehner", "courses":[
        ["Infection Control", 32, 100, "May 1st, 2015"],
        ["Sanitation", 54, 80, "May 2st, 2015"]
      ]
    },
    {"name":"Nancy Pelosi", "courses":[
        ["Infection Control", 100, 100, "January 1st, 2015"],
        ["Sanitation", 100, 100, "January 2st, 2015"]
      ]
    },
    {"name":"Bradley Byrne", "courses":[
        ["Infection Control", 76, null, null],
        ["Sanitation", 45, 85, "August 2st, 2015"]
      ]
    },
    {"name":"Robert Aderholt", "courses":[
        ["Infection Control", null, null, null],
        ["Sanitation", 53, null, null]
      ]
    }
    ],
  "radiology": [
    {"name":"Rick Snyder", "courses":[
        ["CT", 100, 100, "April 22nd, 2015"],
        ["MRI", 95, 100, "March 2st, 2015"]
      ]
    },
    {"name":"Gary Peters", "courses":[
        ["CT", 100, 100, "January 1st, 2015"],
        ["MRI", 100, 100, "January 2st, 2015"]
      ]
    }]
};
function listData(s){
    var out= '<table class="table"><tr><th>Name</th><th>Course</th><th>Pretest Score</th><th>Posttest Score</th><th>Completion Date</th></tr>\n';
    var department = s.value;
    for(var i = 0; i< data[department].length; i++){
        var person = data[department][i];
        for(var j=0; j<person.courses.length; j++){
            out +='<tr><td>';
            if(j==0)
                out += person.name;
            out += '</td>';
            out += '<td>' + person.courses[j][0] + '</td>';
            out += '<td>';
            if(person.courses[j][1])
                out += person.courses[j][1]+'%';
            else
                out +=  '--';
            out += '</td>';
            out += '<td>';
            if(person.courses[j][2])
                out += person.courses[j][2]+'%'
            else
                out += '--';
            out +='</td>';
            out +='<td>';
            if(person.courses[j][3])
                out += person.courses[j][3];
            else
                out += '--';
            out += '</td></tr>\n';
        }
    }
    out += '</table>';
    document.getElementById('results').innerHTML = out;
}    
</script>
</head>
<body>
    <div class="container">
        <h1>Dashboard</h1>
        <div class="panel panel-default">
            <div class="panel-heading">Learners by Department</div>
            <div class="panel-body">
                <form class="form-inline">
                    <div class="form-group">
                        <label>Select Department</label>
                        <select name="departments" onchange="listData(this)" class="form-control">
                            <option value="er" selected>ER</option>
                            <option value="nursing">Nursing</option>
                            <option value="radiology">Radiology</option> 
                        </select>
                    </div>
                </form>
          </div>
            <div id="results"></div>
            </div>
    </div>
</body>
<script>
    listData(document.getElementsByTagName('select')[0]);
</script>
</html>